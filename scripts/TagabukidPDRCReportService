import com.rameses.annotations.*
import com.rameses.common.*
import com.rameses.services.extended.*;

class TagabukidPDRCReportService 
{
    @ActiveDB(value='pdrc_reports', em='tagabukid_pdrc')
	def em;

	@Service("PersistenceService")
    def persistenceSvc;

	@Service('DateService')
	def dtSvc 

	@Service('NumberService')
	def numSvc

	@Service('RPTUtil')
	def util

	@Env
	def env;

	@ProxyMethod
	public def getPDRCMasterListByGender(params){
		def data = [:]
	    def list = []

        if(params.gender == "Male"){
            params.filter = "AND UPPER(xxx.`gender`) IN ('MALE','M') "
        }else{
            params.filter = "AND UPPER(xxx.`gender`) IN ('FEMALE','F') "
        }
        params.casefileid = params.casefile.objid
		
       	list = em.getPDRCMasterListByGender(params)

		data.reportdata = list;
		data.parameters = [
			LGUNAME  :"PG-BUKIDNON, REGION 10",
			LGUADDRESS : "Provincial Capiptol, City of Malaybalay",
			TITLE :"PDRC Master List (" + params.gender.toUpperCase() + ") Case:"  + params.casefile.name.toUpperCase()
		]
		return data

	}



}
